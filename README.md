# Seq.Apps.EventTimeout - Event Timeout for Seq

This app provides an event timeout function for [Seq](https://datalust.co/seq). It will read an input stream and monitor for a matching text string during a configured start and end time. 

It includes a timeout and suppression interval, which allows you to fine tune the way the timeout works.

When a timeout occurs, it will output the configured text and description back to the stream.

| Feature                                    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Benefit                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|--------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Monitor configured signals                 | Standard Seq functionality - required for Event Timeout to work effectively                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Each instance can monitor one or more signals (intersecting) and action them based on the configured criteria                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Configurable start and end times           | Watch for events between two times, to detect that an expected event did not occur                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Event Timeout can be configured to any interval in a 24 hour period, such as midnight to midnight, or 8am to 10am. This allows fine grained control over when alerts may be raised your critical application processes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Configurable days of week                  | Control the days that the timeout monitoring will start                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Events do not always occur on a 7 day basis - for example, a process that only occurs Monday to Friday, but not Saturday and Sunday. This avoids false positive alerts being raised.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Configurable text match                    | Case-insensitive partial string match for the event text to monitor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | This version of Event Timeout relies on matching a text string that represents the event that is being watched for. This allows filtering the input stream to ensure that only the specific event is matched.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Configurable timeout interval              | Within the start and end times, an interval in which the event must be seen before an alert is output                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Within the configured start and end times, there must be an interval in which the event is expected to be seen. This could be 60 seconds, 60 minutes, 12 hours - but this provides the timeout trigger for an alert to be raised.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Configurable suppression interval          | An interval during which further alerts are suppressed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Event Timeout evaluates whether it has matched an event once per second, so without a suppression interval, 60 alerts per minute would be output. A suppression interval allows for an alert to be raised after the suppression interval expires, such as 1 minute, 1 hour, 6 hours. This is useful to detect an error that has not been corrected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Configurable alert message and description | Detailed text that will be output as an event to the stream when a timeout occurs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | An alert "Message : Description" will be output to the stream, allowing this to be matched in multiple ways for signals, dashboards, and alerts.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Configurable alert level                   | An error level that will be assigned to the alert.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | The default alert error level is "Error", but can be overridden  to Verbose, Debug, Information, Warning, Error, or Fatal for filtering purposes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Configurable tags                          | Tags added to the log entries for the app                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | The tags may be of use in configuring signals or queries to match specific events.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Optional diagnostic logging                | Extensive diagnostic logging can be enabled to permit clarity on what's happening "under the hood"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | A time-based event logging app can make it complex to understand what happened and when. Enabling the diagnostic logging provides a greater deal of clarity over the workings of Event Timeout, which can be particularly helpful if you suspect something is wrong.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| UTC-based operation                        | Configured start/end times are converted to, and managed as, UTC times to avoid the complexity of time zone offsets.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Consistent handling of time intervals, and the start/end times will work across daylight saving time boundaries so that events continue to be monitored between the correct local times.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Public holiday automation                  | Using the AbstractApi Holidays API, retrieve a list of public holidays, which can be filtered on;<br><br>* Type (eg. National, Local, Religious) - text insensitive partial string match<br>* Location (eg. Australia, New South wales) - case insensitive full string match<br>* Weekends - Disable public holidays falling on weekends by default<br>* Bank Holidays - filter events with "Bank Holiday" in the name by default<br><br>This implementation allows a test date to be configured, for simulation of a given holiday.<br><br>It also includes configuration for proxy servers for Seq instances that do not have direct outbound accesss. | AbstractApi offer a 'Holidays API' that can provide up to date public holidays for specific countries and locations (eg. states). Their REST API offering includes a free tier, which permits 1000 requests per month, 1 request per second. https://www.abstractapi.com/holidays-api<br><br>Event Timeout implements Holidays API with an approach that will fit the free tier in most cases. Each instance of Event Timeout:<br><br>* retrieves the current day's public holidays once per day (when the local date changes)<br>* retries every 10 seconds, up to 10 times, to allow for cases where the 1 request per second limit has collisions between instances<br>* optionally filters the holiday feed based on the configured Type case-insensitive partial string match, to allow filtering for only National and Local holidays (for example)<br>* optionally filters the holiday feed based on the configured Location case-insensitive full string match, to allow filtering for only country and state events (for example). A full string match is required to avoid false positives.<br>* filter weekends - by default, public holidays falling on Saturday or Sunday will be filtered out, but can be enabled. This does not override the configured days of week.<br>* filter Bank Holidays - by default, a hard-coded case-insensitive partial string match on the holiday name is performed. If it matches "Bank Holiday" it is filtered out, but can be enabled.<br>* "Test Date" - an ability to simulate a specific date to see the behaviour on a given public holiday. This has been deeply integrated so that the Start/End time will correctly reflect the "next UTC day" after the public holiday has ended.<br><br>Operationally:<br><br>* Retrieved public holidays do not interrupt an interval ("Showtime") that is already in progress - for example, a start time at 10:00pm local time which then ends at 2:00am on a public holiday.<br>* Start and end times are recalculated after a UTC day rollover, once a "Showtime" interval is no longer in progress.<br>* At recalculation, the active public holidays will be taken into consideration, so the above example would mean that the next start time, falling at 10:00pm on the public holiday, will be moved to the next day. |